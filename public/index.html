<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marital Grace | Singles & Couples Seminar 2026</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;0,700;1,400&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-gold': '#C5A059',
                        'brand-pink': '#E8D5D5',
                        'brand-cream': '#FAF6F1',
                        'brand-charcoal': '#2D2D2D',
                    },
                    fontFamily: {
                        serif: ['Cormorant Garamond', 'serif'],
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        .watercolor-bg {
            background-color: #FAF6F1;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 1000 1000' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            background-blend-mode: overlay;
        }
        
        .border-elegant { border: 1px solid rgba(197, 160, 89, 0.3); }

        .polaroid {
            background: white;
            padding: 0.75rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            transition: transform 0.4s ease;
        }
        .polaroid:hover { transform: scale(1.05) rotate(0deg) !important; z-index: 30; }

        /* Ring Hover Animation */
        .ring-hover { transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .ring-hover:hover {
            transform: scale(1.1) rotate(5deg);
            filter: drop-shadow(0 10px 15px rgba(197, 160, 89, 0.4));
        }

        /* FAQ Icon Logic */
        details summary::-webkit-details-marker { display:none; }
        details summary { list-style: none; }
        details .plus-icon { display: block; }
        details .minus-icon { display: none; }
        details[open] .plus-icon { display: none; }
        details[open] .minus-icon { display: block; }

        html { scroll-behavior: smooth; }
    </style>
</head>
<body class="bg-brand-cream text-brand-charcoal font-sans antialiased">

    <!-- Navigation -->
    <nav class="fixed w-full z-50 bg-white/90 backdrop-blur-md border-b border-brand-pink">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <div class="flex-shrink-0 flex items-center">
                    <span class="font-serif text-2xl font-bold tracking-[0.1em] text-brand-charcoal uppercase cursor-default">Marital Grace</span>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="#about" class="text-sm font-medium hover:text-brand-gold transition uppercase tracking-widest">About</a>
                    <a href="#tickets" class="text-sm font-medium hover:text-brand-gold transition uppercase tracking-widest">Tickets</a>
                    <a href="#faq" class="bg-brand-charcoal text-white px-6 py-2 rounded-full text-xs font-bold hover:bg-brand-gold transition tracking-widest uppercase">FAQ</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="relative pt-32 pb-20 overflow-hidden watercolor-bg min-h-screen flex items-center">
        <img src="./media/floral-top-left.png" class="absolute top-0 left-0 w-48 md:w-80 z-0 pointer-events-none opacity-90" alt="">
        <img src="./media/floral-top-right.png" class="absolute top-0 right-0 w-48 md:w-80 z-0 pointer-events-none opacity-90" alt="">
        <img src="./media/floral-bottom-left.png" class="absolute bottom-0 left-0 w-48 md:w-80 z-0 pointer-events-none opacity-90" alt="">
        <img src="./media/floral-bottom-right.png" class="absolute bottom-0 right-0 w-48 md:w-80 z-0 pointer-events-none opacity-90" alt="">

        <div class="max-w-6xl mx-auto px-4 relative z-10 text-center">
            <p class="text-lg md:text-2xl font-light tracking-[0.4em] text-brand-charcoal uppercase mb-8">Singles & Couples Seminar</p>
            <div class="flex justify-center mb-6">
                <img src="./media/rings.png" alt="Rings" class="w-48 md:w-72 drop-shadow-sm ring-hover cursor-pointer">
            </div>
            <h1 class="text-7xl md:text-[10rem] font-serif font-medium text-brand-charcoal mb-4 italic leading-none">Marital Grace</h1>
            <h2 class="text-xl md:text-3xl font-light tracking-[0.2em] uppercase mb-12">The Key to 32 Years of Marriage</h2>
            <div class="space-y-2 mb-12 font-serif text-2xl">
                <p class="uppercase tracking-widest">Saturday</p>
                <p class="font-bold text-3xl">March 14, 2026 | at 9 am</p>
                <p class="text-brand-gold font-bold text-xl mt-4">Tickets: R250.00 PP</p>
            </div>
            <div class="flex flex-col items-center gap-6">
                <a href="#tickets" class="border-elegant bg-white/50 backdrop-blur-sm text-brand-charcoal px-10 py-4 rounded-full text-lg font-medium hover:bg-brand-gold hover:text-white transition shadow-sm uppercase tracking-widest">
                    Book Your Seat
                </a>
            </div>
        </div>
    </header>

    <!-- About Section (Restored Comparison & Verse) -->
    <section id="about" class="py-24 bg-white relative">
        <div class="max-w-6xl mx-auto px-4">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-20 items-center">
                
                <!-- Comparison Images -->
                <div class="relative h-[500px] flex items-center justify-center">
                    <div class="polaroid absolute top-0 left-4 w-64 rotate-[-6deg] z-10">
                        <img src="./media/1994.png" onerror="this.src='https://images.unsplash.com/photo-1628891435227-0c7cd3db5e97?auto=format&fit=crop&w=600&q=80'" alt="1994" class="w-full grayscale">
                        <div class="text-center font-serif text-lg mt-3 text-gray-500 italic">The Beginning (1994)</div>
                    </div>
                    <div class="polaroid absolute bottom-0 right-4 w-64 rotate-[4deg] z-20">
                        <img src="./media/2026.png" onerror="this.src='https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?auto=format&fit=crop&w=600&q=80'" alt="2026" class="w-full">
                        <div class="text-center font-serif text-lg mt-3 text-brand-gold italic">Still Standing (2026)</div>
                    </div>
                </div>

                <!-- Text Content -->
                <div>
                    <h3 class="text-5xl font-serif italic mb-8 text-brand-charcoal">Building on the Rock</h3>
                    
                    <blockquote class="border-l-4 border-brand-gold pl-8 py-4 mb-10 bg-brand-cream/30 rounded-r-xl">
                        <p class="text-2xl text-brand-charcoal font-serif italic leading-relaxed">
                            “Though one may be overpowered by another, two can withstand him. And a threefold cord is not quickly broken.”
                        </p>
                        <footer class="text-sm font-bold text-brand-gold mt-4 uppercase tracking-[0.2em]">— Ecclesiastes 4:12 (NKJV)</footer>
                    </blockquote>

                    <p class="text-xl text-gray-600 leading-relaxed mb-10 font-light">
                        What makes a marriage last 32 years? Join us as we unpack the power of building your covenant on Christ. discovery how grace transforms every relationship, making it not just sustainable, but strong.
                    </p>

                    <div class="flex items-start gap-4">
                        <img src="./media/rings.png" class="w-12 h-auto opacity-60 mt-1" alt="">
                        <div>
                            <p class="text-xs uppercase tracking-widest text-brand-gold font-bold">Location</p>
                            <p class="text-2xl font-serif">The Synagogues JWC</p>
                            <p class="text-sm text-gray-500 font-light italic">Langrand Road, Vereeniging, 1929</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Ticket Section -->
    <section id="tickets" class="py-24 watercolor-bg relative">
        <div class="max-w-lg mx-auto px-4">
            <div class="bg-white rounded-3xl shadow-2xl overflow-hidden border-elegant relative z-10">
                <div class="bg-brand-charcoal py-10 text-center text-white">
                    <h2 class="text-4xl font-serif italic">Secure Your Seat</h2>
                    <p class="uppercase tracking-[0.3em] text-xs mt-2 text-brand-pink">R250 Per Person</p>
                </div>
                
                <div class="p-10" id="ticket-form-wrapper">
                    <form id="payment-form" onsubmit="event.preventDefault();">
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <div>
                                <label class="block text-[10px] uppercase tracking-widest font-bold text-gray-400 mb-2 font-sans">First Name</label>
                                <input type="text" id="firstName" class="w-full border-b border-gray-200 focus:border-brand-gold outline-none py-2 text-lg font-serif" required>
                            </div>
                            <div>
                                <label class="block text-[10px] uppercase tracking-widest font-bold text-gray-400 mb-2 font-sans">Last Name</label>
                                <input type="text" id="lastName" class="w-full border-b border-gray-200 focus:border-brand-gold outline-none py-2 text-lg font-serif" required>
                            </div>
                        </div>
                        <div class="mb-8">
                            <label class="block text-[10px] uppercase tracking-widest font-bold text-gray-400 mb-2 font-sans">Email Address</label>
                            <input type="email" id="email" class="w-full border-b border-gray-200 focus:border-brand-gold outline-none py-2 text-lg font-serif" required>
                        </div>
                        <div class="flex justify-between items-center mb-10">
                            <div>
                                <p class="text-[10px] uppercase tracking-widest font-bold text-gray-400 font-sans">Quantity</p>
                                <div class="flex items-center mt-2 font-sans">
                                    <button type="button" onclick="updateQty(-1)" class="w-8 h-8 rounded-full border border-gray-200 flex items-center justify-center hover:bg-brand-pink transition">-</button>
                                    <input type="number" id="ticket-qty" value="1" class="w-12 text-center font-serif text-xl bg-transparent" readonly>
                                    <button type="button" onclick="updateQty(1)" class="w-8 h-8 rounded-full border border-gray-200 flex items-center justify-center hover:bg-brand-pink transition">+</button>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="text-[10px] uppercase tracking-widest font-bold text-gray-400 font-sans">Total</p>
                                <p class="text-4xl font-serif text-brand-gold" id="total-price">R250.00</p>
                            </div>
                        </div>
                        <button type="button" onclick="payWithYoco()" class="w-full bg-brand-charcoal text-white py-5 rounded-full font-bold text-sm tracking-[0.2em] uppercase hover:bg-brand-gold transition shadow-xl font-sans">
                            Proceed to Secure Payment
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" class="py-24 bg-white">
        <div class="max-w-3xl mx-auto px-4">
            <h2 class="text-5xl font-serif italic text-center mb-16 text-brand-charcoal uppercase tracking-tight">Frequently Asked Questions</h2>
            
            <div class="space-y-4">
                <details name="faq" class="group bg-brand-cream rounded-2xl border-elegant overflow-hidden">
                    <summary class="flex justify-between items-center p-6 cursor-pointer font-serif text-xl italic text-brand-charcoal">
                        When is the last day to buy tickets?
                        <div class="text-brand-gold text-2xl font-sans">
                            <span class="plus-icon">+</span>
                            <span class="minus-icon">−</span>
                        </div>
                    </summary>
                    <div class="px-6 pb-6 text-gray-600 font-light leading-relaxed">
                        The last day to purchase tickets for the seminar is <b class="text-brand-charcoal">March 12th, 2026</b>, at midnight.
                    </div>
                </details>

                <details name="faq" class="group bg-brand-cream rounded-2xl border-elegant overflow-hidden">
                    <summary class="flex justify-between items-center p-6 cursor-pointer font-serif text-xl italic text-brand-charcoal">
                        What is the dress code?
                        <div class="text-brand-gold text-2xl font-sans">
                            <span class="plus-icon">+</span>
                            <span class="minus-icon">−</span>
                        </div>
                    </summary>
                    <div class="px-6 pb-6 text-gray-600 font-light italic">Smart casual.</div>
                </details>

                <details name="faq" class="group bg-brand-cream rounded-2xl border-elegant overflow-hidden">
                    <summary class="flex justify-between items-center p-6 cursor-pointer font-serif text-xl italic text-brand-charcoal">
                        How do I get my tickets?
                        <div class="text-brand-gold text-2xl font-sans">
                            <span class="plus-icon">+</span>
                            <span class="minus-icon">−</span>
                        </div>
                    </summary>
                    <div class="px-6 pb-6 text-gray-600 font-light leading-relaxed">
                        Tickets are emailed to you immediately after a successful purchase. Please check your spam folder if you are unable to locate it. For further queries, contact <b class="text-brand-charcoal">info@thesynagogues.com</b> or <b class="text-brand-charcoal">087 234 5678</b>.
                    </div>
                </details>

                <details name="faq" class="group bg-brand-cream rounded-2xl border-elegant overflow-hidden">
                    <summary class="flex justify-between items-center p-6 cursor-pointer font-serif text-xl italic text-brand-charcoal">
                        Is this seminar only for couples?
                        <div class="text-brand-gold text-2xl font-sans">
                            <span class="plus-icon">+</span>
                            <span class="minus-icon">−</span>
                        </div>
                    </summary>
                    <div class="px-6 pb-6 text-gray-600 font-light leading-relaxed">
                        No. Singles are encouraged to join and gain insight as they prepare for that coming season of their life. However, please note that children under the age of 18 are not allowed.
                    </div>
                </details>

                <details name="faq" class="group bg-brand-cream rounded-2xl border-elegant overflow-hidden">
                    <summary class="flex justify-between items-center p-6 cursor-pointer font-serif text-xl italic text-brand-charcoal">
                        How do I pay?
                        <div class="text-brand-gold text-2xl font-sans">
                            <span class="plus-icon">+</span>
                            <span class="minus-icon">−</span>
                        </div>
                    </summary>
                    <div class="px-6 pb-6 text-gray-600 font-light leading-relaxed">
                        We only accept payments through Yoco via our website. For any payment queries, please contact <b class="text-brand-charcoal">info@thesynagogues.com</b>.
                    </div>
                </details>

                <details name="faq" class="group bg-brand-cream rounded-2xl border-elegant overflow-hidden">
                    <summary class="flex justify-between items-center p-6 cursor-pointer font-serif text-xl italic text-brand-charcoal">
                        Can I watch online?
                        <div class="text-brand-gold text-2xl font-sans">
                            <span class="plus-icon">+</span>
                            <span class="minus-icon">−</span>
                        </div>
                    </summary>
                    <div class="px-6 pb-6 text-gray-600 font-light">No, unfortunately, this is an in-person only event.</div>
                </details>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-brand-cream py-16 text-center border-t border-brand-pink">
        <p class="font-serif italic text-3xl mb-2">Marital Grace</p>
        <p class="text-[10px] uppercase tracking-[0.3em] text-gray-400 font-medium">The Synagogues JWC &copy; 2026</p>
    </footer>

    <script>
        const ticketPrice = 250;
        let quantity = 1;

        // CLOSURE: March 12, 2026 at Midnight
        const ticketDeadline = new Date("2026-03-13T00:00:00"); 
        
        function checkTicketsClosed() {
            const now = new Date();
            if (now >= ticketDeadline) {
                const wrapper = document.getElementById('ticket-form-wrapper');
                wrapper.innerHTML = `
                    <div class="text-center py-12">
                        <p class="font-serif text-3xl italic text-brand-gold mb-4 uppercase">Tickets are now closed</p>
                        <p class="text-gray-500 font-light px-4">The registration deadline for this event has passed. We look forward to seeing you at our next seminar.</p>
                        <div class="mt-8 text-[10px] uppercase tracking-widest text-gray-400 font-bold">info@thesynagogues.com</div>
                    </div>
                `;
            }
        }

        function updateQty(change) {
            const input = document.getElementById('ticket-qty');
            let newQty = parseInt(input.value) + change;
            if (newQty >= 1 && newQty <= 20) {
                quantity = newQty;
                input.value = quantity;
                document.getElementById('total-price').innerText = 'R' + (quantity * ticketPrice) + '.00';
            }
        }

        async function payWithYoco() {
            const email = document.getElementById('email').value;
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const btn = document.querySelector('button[onclick="payWithYoco()"]');
            
            if(!email || !firstName || !lastName) {
                alert("Please fill in all fields.");
                return;
            }

            btn.innerHTML = "Opening Secure Checkout...";
            btn.disabled = true;

            try {
                const response = await fetch('/create-checkout', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, quantity, firstName, lastName })
                });

                const data = await response.json();
                if (data.redirectUrl) {
                    window.location.href = data.redirectUrl;
                } else {
                    alert("Error creating payment link.");
                    btn.disabled = false;
                    btn.innerHTML = "Proceed to Secure Payment";
                }
            } catch (err) {
                alert("Network error. Please refresh and try again.");
                btn.disabled = false;
                btn.innerHTML = "Proceed to Secure Payment";
            }
        }

        window.onload = async function() {
            checkTicketsClosed();

            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('payment_success') === 'true') {
                const email = urlParams.get('email');
                const qty = urlParams.get('qty');
                const firstName = urlParams.get('firstName');
                const lastName = urlParams.get('lastName');

                document.body.innerHTML = `
                    <div class="h-screen watercolor-bg flex items-center justify-center p-4 text-center">
                        <div class="bg-white p-12 rounded-3xl shadow-2xl max-w-md border-elegant">
                            <h1 class="text-4xl font-serif italic text-brand-gold mb-4">Payment Received</h1>
                            <p class="text-gray-600 font-light mb-8 italic leading-relaxed">Hi ${firstName}, we are preparing your tickets now. Please check your email inbox (and spam folder) in a few minutes.</p>
                            <div class="animate-pulse text-brand-gold tracking-[0.2em] text-xs font-bold uppercase">Processing...</div>
                        </div>
                    </div>
                `;

                try {
                    const response = await fetch('/send-ticket', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email, quantity: qty, firstName, lastName })
                    });

                    const data = await response.json();
                    if (data.success) {
                        document.body.innerHTML = `
                            <div class="h-screen watercolor-bg flex items-center justify-center p-4 text-center">
                                <div class="bg-white p-12 rounded-3xl shadow-2xl max-w-md border-elegant">
                                    <h1 class="text-5xl font-serif italic text-brand-gold mb-6">Thank You</h1>
                                    <p class="text-gray-700 font-light mb-8 italic text-lg leading-relaxed">Your tickets (Ref: <b class="text-brand-charcoal">${data.ref}</b>) have been sent to <b class="text-brand-charcoal">${email}</b>.</p>
                                    <a href="/marital-grace" class="inline-block bg-brand-charcoal text-white px-10 py-4 rounded-full text-xs font-bold tracking-widest uppercase hover:bg-brand-gold transition">Return Home</a>
                                </div>
                            </div>
                        `;
                    }
                } catch (err) {
                    document.body.innerHTML = "<div class='h-screen flex items-center justify-center p-10 text-center'><div><h1 class='text-2xl font-serif mb-4'>Payment confirmed, but email system failed.</h1><p>Don't worry, your payment is logged. Please contact <b>info@thesynagogues.com</b> to have your ticket sent manually.</p></div></div>";
                }
            }
        };
    </script>
</body>
</html>